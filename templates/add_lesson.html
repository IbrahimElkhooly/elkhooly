{% extends "base.html" %}

{% block content %}
<h2>Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³ Ø¬Ø¯ÙŠØ¯</h2>
<form method="POST">
    <label>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³:</label>
    <input type="text" name="title" required><br>

    <label>Ø§Ù„Ù…Ø­ØªÙˆÙ‰:</label>
    <textarea name="content" required></textarea><br>

    <label>Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
    <input type="text" name="video_url"><br>

    <h3>ğŸ“Œ Ø¥Ø¶Ø§ÙØ© Ø£Ø³Ø¦Ù„Ø© ØªÙØ§Ø¹Ù„ÙŠØ©:</h3>
    <input type="hidden" name="num_questions" id="num_questions" value="0">
    <div id="questions-container"></div>

    <button type="button" onclick="addQuestion()">â• Ø¥Ø¶Ø§ÙØ© Ø³Ø¤Ø§Ù„</button>
    <br><br>
    <button type="submit">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯Ø±Ø³</button>
</form>

<script>
let questionCount = 0;

function addQuestion() {
    let container = document.getElementById("questions-container");
    let qIndex = questionCount;

    let html = `
        <div id="question_${qIndex}" class="question">
            <h4>Ø§Ù„Ø³Ø¤Ø§Ù„ ${qIndex + 1}</h4>
            <label>Ù†Øµ Ø§Ù„Ø³Ø¤Ø§Ù„:</label>
            <input type="text" name="question_${qIndex}" required><br>

            <label>Ù†ÙˆØ¹ Ø§Ù„Ø³Ø¤Ø§Ù„:</label>
            <select name="type_${qIndex}" onchange="toggleOptions(${qIndex})">
                <option value="mcq">Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯</option>
                <option value="true_false">ØµØ­ Ø£Ùˆ Ø®Ø·Ø£</option>
                <option value="short_answer">Ø¥Ø¬Ø§Ø¨Ø© Ù‚ØµÙŠØ±Ø©</option>
            </select><br>

            <div id="options_${qIndex}" class="options" style="display:block;">
                <label>Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª:</label>
                <input type="text" name="option_${qIndex}_1" placeholder="Ø§Ù„Ø®ÙŠØ§Ø± 1">
                <input type="text" name="option_${qIndex}_2" placeholder="Ø§Ù„Ø®ÙŠØ§Ø± 2">
                <input type="text" name="option_${qIndex}_3" placeholder="Ø§Ù„Ø®ÙŠØ§Ø± 3">
                <input type="text" name="option_${qIndex}_4" placeholder="Ø§Ù„Ø®ÙŠØ§Ø± 4">
            </div>

            <label>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©:</label>
            <input type="text" name="correct_${qIndex}" required><br>

            <label>Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø©:</label>
            <input type="text" name="feedback_${qIndex}" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© Ù„Ù„Ø³Ø¤Ø§Ù„"><br>

            <button type="button" onclick="removeQuestion(${qIndex})">âŒ Ø­Ø°Ù</button>
        </div>
        <hr>
    `;

    container.innerHTML += html;
    questionCount++;
    document.getElementById("num_questions").value = questionCount;
}

function removeQuestion(index) {
    document.getElementById(`question_${index}`).remove();
    questionCount--;
    document.getElementById("num_questions").value = questionCount;
}

function toggleOptions(index) {
    let type = document.querySelector(`select[name="type_${index}"]`).value;
    let optionsDiv = document.getElementById(`options_${index}`);
    optionsDiv.style.display = (type === "mcq") ? "block" : "none";
}
</script>

<style>
/* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù†ØµÙˆØµ ÙˆØ§Ù„Ø¥Ø¯Ø®Ø§Ù„Ø§Øª ÙÙŠ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ */
form {
    width: 80%;
    margin: auto;
    padding: 20px;
    background-color: #f9f9f9;
    border-radius: 10px;
}

label {
    font-size: 16px;
    margin-top: 10px;
    display: block;
}

input[type="text"],
textarea {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    font-size: 14px;
    border-radius: 5px;
    border: 1px solid #ccc;
}

textarea {
    resize: vertical;
}

button {
    background-color: #4CAF50;
    color: white;
    padding: 10px 20px;
    margin-top: 15px;
    border: none;
    cursor: pointer;
    font-size: 16px;
    border-radius: 5px;
}

button:hover {
    background-color: #45a049;
}

/* ØªÙ†Ø³ÙŠÙ‚ Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± */
.question {
    padding: 15px;
    background-color: #f1f1f1;
    margin-bottom: 20px;
    border-radius: 8px;
}

.question hr {
    border: 1px solid #ddd;
}

/* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© */
.options input[type="text"] {
    width: 48%;
    display: inline-block;
    margin: 5px 1%;
}

.options label {
    display: block;
    margin-bottom: 5px;
}

hr {
    border-top: 1px solid #ddd;
    margin-top: 10px;
}
</style>

{% endblock %}
