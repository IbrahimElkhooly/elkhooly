{% extends "base.html" %}

{% block content %}
        <style>
            /* static/css/assistants.css */

.container {
    background-color: #f9f9f9;
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 0 10px #ccc;
    max-width: 700px;
    margin: auto;
}

h2, h3 {
    color: #2c3e50;
    margin-bottom: 20px;
    font-weight: bold;
}

form {
    margin-bottom: 20px;
}

label {
    font-weight: bold;
    color: #34495e;
}

.btn-primary {
    background-color: #3498db;
    border: none;
}

.btn-danger {
    background-color: #e74c3c;
    border: none;
}

.btn-secondary {
    background-color: #95a5a6;
    border: none;
}

.list-group-item {
    background-color: #ffffff;
    border: 1px solid #ddd;
    border-radius: 5px;
    margin-bottom: 8px;
}

a.btn-link {
    text-decoration: none;
    font-weight: bold;
    color: #2980b9;
}

        </style>
<div class="container">
    <h2>إدارة المساعدين للمادة</h2>

    <!-- فورم لإضافة مساعد -->
    <form action="{{ url_for('assign_assistant') }}" method="POST">
        <input type="hidden" name="subject_id" value="{{ subject_id }}">

        <label for="assistant_id">اختر المساعد:</label>
        <select name="assistant_id" required>
            {% for user in users %}
                <option value="{{ user.id }}">{{ user.username }}</option>
            {% endfor %}
        </select>

        <button type="submit">إضافة المساعد</button>
    </form>

    <hr>

    <h3>المساعدون الحاليون</h3>
    <ul>
        {% for assistant in assistants %}
            <li>
                {{ assistant.username }}
                <form action="{{ url_for('remove_assistant', assistant_id=assistant.id, subject_id=subject_id) }}" method="POST" style="display:inline;">
                    <button type="submit">إزالة</button>
                </form>
            </li>
        {% endfor %}
    </ul>
{% for assistant in assistants %}
<li>
    {{ assistant.username }}
    <a href="{{ url_for('manage_assistant_permissions', assistant_id=assistant.id, subject_id=subject_id) }}"
       class="btn btn-sm btn-secondary ms-2">
        ⚙️ إدارة الصلاحيات
    </a>

    <form action="{{ url_for('remove_assistant', assistant_id=assistant.id, subject_id=subject_id) }}" method="POST" style="display:inline;">
        <button type="submit" class="btn btn-sm btn-danger">
            ❌ إزالة
        </button>
    </form>
</li>
{% endfor %}

    <a href="{{ url_for('subject_page', subject_id=subject_id) }}">العودة إلى المادة</a>
</div>
{% endblock %}
